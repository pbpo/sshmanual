<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Server Access Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; }
        .step-card { transition: all 0.3s ease; }
        .step-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .code-block { font-family: 'Menlo', 'Monaco', 'Courier New', monospace; }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header -->
    <header class="bg-indigo-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i data-lucide="server" class="w-6 h-6"></i>
                <h1 class="text-xl font-bold">Lab Server Access Guide</h1>
            </div>
            <span class="text-xs bg-indigo-500 px-2 py-1 rounded text-indigo-100">Beginner v1.1</span>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-6 py-8 space-y-12">

        <!-- Info Banner -->
        <section class="bg-white rounded-2xl p-8 shadow-sm border border-slate-200 text-center">
            <h2 class="text-2xl font-bold mb-6 text-slate-800">Server Connection Info</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-slate-100 p-4 rounded-xl flex flex-col items-center justify-center relative group">
                    <span class="text-sm text-slate-500 mb-1">IP Address</span>
                    <strong class="text-2xl text-indigo-600 font-mono tracking-wider">10.150.20.140</strong>
                    <button onclick="copyText('10.150.20.140')" class="absolute right-2 top-2 p-2 text-slate-400 hover:text-indigo-600 transition-colors" title="Copy">
                        <i data-lucide="copy" class="w-4 h-4"></i>
                    </button>
                </div>
                <div class="bg-slate-100 p-4 rounded-xl flex flex-col items-center justify-center relative">
                    <span class="text-sm text-slate-500 mb-1">Port</span>
                    <strong class="text-2xl text-indigo-600 font-mono tracking-wider">48000</strong>
                    <button onclick="copyText('48000')" class="absolute right-2 top-2 p-2 text-slate-400 hover:text-indigo-600 transition-colors" title="Copy">
                        <i data-lucide="copy" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Steps Container -->
        <div class="space-y-8">
            
            <!-- Step 1 -->
            <section class="step-card bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-indigo-500"></div>
                <div class="flex items-start gap-4">
                    <div class="bg-indigo-100 text-indigo-600 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">1</div>
                    <div class="w-full">
                        <h3 class="text-xl font-bold mb-2">Create SSH Key</h3>
                        <p class="text-slate-600 mb-4">This server uses a 'key file' instead of a password. You need to generate this key on your local computer.</p>
                        
                        <!-- OS Selector -->
                        <div class="flex gap-2 mb-4 bg-slate-100 p-1 rounded-lg w-fit">
                            <button onclick="setOS('windows')" id="btn-windows" class="px-4 py-2 rounded-md text-sm font-medium bg-white shadow text-indigo-600 transition-all">Windows</button>
                            <button onclick="setOS('mac')" id="btn-mac" class="px-4 py-2 rounded-md text-sm font-medium text-slate-500 hover:bg-white/50 transition-all">Mac / Linux</button>
                        </div>

                        <div id="content-windows" class="bg-slate-900 rounded-xl p-4 text-slate-100 code-block text-sm overflow-x-auto">
                            <p class="text-slate-400 mb-2"># Search for "PowerShell" in Windows (Win key), run it, and enter the command below.</p>
                            <div class="flex justify-between items-center bg-slate-800 p-3 rounded mb-2">
                                <code class="text-green-400">ssh-keygen -t ed25519</code>
                                <button onclick="copyText('ssh-keygen -t ed25519')" class="text-slate-400 hover:text-white"><i data-lucide="copy" class="w-4 h-4"></i></button>
                            </div>
                            
                            <!-- Important Warning -->
                            <div class="mt-4 bg-yellow-900/50 border border-yellow-600 p-3 rounded-lg flex items-start gap-3">
                                <i data-lucide="alert-triangle" class="w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"></i>
                                <div>
                                    <p class="text-yellow-100 font-bold mb-1">Do NOT type anything!</p>
                                    <p class="text-yellow-200/80 text-xs">
                                        When prompted with questions (e.g., "Enter file in which to save..."),<br>
                                        <span class="text-white font-bold text-base underline decoration-yellow-500 decoration-2 underline-offset-2">JUST PRESS ENTER 3 TIMES</span> until it finishes.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div id="content-mac" class="hidden bg-slate-900 rounded-xl p-4 text-slate-100 code-block text-sm overflow-x-auto">
                            <p class="text-slate-400 mb-2"># Open the "Terminal" app and enter the command below.</p>
                            <div class="flex justify-between items-center bg-slate-800 p-3 rounded mb-2">
                                <code class="text-green-400">ssh-keygen -t ed25519</code>
                                <button onclick="copyText('ssh-keygen -t ed25519')" class="text-slate-400 hover:text-white"><i data-lucide="copy" class="w-4 h-4"></i></button>
                            </div>
                            
                            <!-- Important Warning -->
                            <div class="mt-4 bg-yellow-900/50 border border-yellow-600 p-3 rounded-lg flex items-start gap-3">
                                <i data-lucide="alert-triangle" class="w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"></i>
                                <div>
                                    <p class="text-yellow-100 font-bold mb-1">Do NOT type anything!</p>
                                    <p class="text-yellow-200/80 text-xs">
                                        When prompted with questions (e.g., "Enter file in which to save..."),<br>
                                        <span class="text-white font-bold text-base underline decoration-yellow-500 decoration-2 underline-offset-2">JUST PRESS ENTER 3 TIMES</span> until it finishes.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 2 -->
            <section class="step-card bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-blue-500"></div>
                <div class="flex items-start gap-4">
                    <div class="bg-blue-100 text-blue-600 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">2</div>
                    <div class="w-full">
                        <h3 class="text-xl font-bold mb-2">Send Public Key to Admin</h3>
                        <p class="text-slate-600 mb-4">You must copy the content of the generated key (a long string of characters) and send it to the admin (Senior/TA) via email or messenger to have your account created.</p>
                        
                        <div class="bg-slate-100 p-4 rounded-xl border border-slate-200">
                            <p class="text-sm font-bold text-slate-700 mb-2">Run the command below to display your key. Drag to select and copy it.</p>
                            <div class="bg-white p-3 rounded border border-slate-300 flex justify-between items-center code-block text-sm">
                                <code class="text-pink-600 break-all select-all">cat ~/.ssh/id_ed25519.pub</code>
                                <button onclick="copyText('cat ~/.ssh/id_ed25519.pub')" class="ml-2 text-slate-400 hover:text-blue-600 flex-shrink-0"><i data-lucide="copy" class="w-4 h-4"></i></button>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 text-blue-800 text-xs rounded-lg">
                                <strong>ðŸ’¡ Example:</strong> ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... (Copy the entire line)
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 3 -->
            <section class="step-card bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-green-500"></div>
                <div class="flex items-start gap-4">
                    <div class="bg-green-100 text-green-600 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">3</div>
                    <div class="w-full">
                        <h3 class="text-xl font-bold mb-2">Connect to Server</h3>
                        <p class="text-slate-600 mb-4">Once the admin confirms "Account Created", use the command below to connect.</p>
                        
                        <div class="bg-slate-900 text-white p-6 rounded-xl shadow-inner">
                            <label class="text-xs text-slate-400 uppercase font-bold mb-1 block">Connection Command Generator</label>
                            <div class="flex flex-col md:flex-row gap-3 mb-4">
                                <input type="text" id="usernameInput" placeholder="Enter assigned ID (e.g., john)" class="bg-slate-800 border border-slate-600 text-white text-sm rounded-lg p-2.5 flex-1 focus:ring-green-500 focus:border-green-500 outline-none transition-colors">
                            </div>
                            
                            <div class="bg-black p-4 rounded border border-slate-700 flex justify-between items-center">
                                <code id="sshCommand" class="text-green-400 font-mono text-sm break-all">ssh -p 48000 <span class="text-yellow-400">[ID]</span>@10.150.20.140</code>
                                <button onclick="copyCommand()" class="ml-4 text-slate-400 hover:text-white"><i data-lucide="copy" class="w-5 h-5"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 4 -->
            <section class="step-card bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-purple-500"></div>
                <div class="flex items-start gap-4">
                    <div class="bg-purple-100 text-purple-600 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">4</div>
                    <div class="w-full">
                        <h3 class="text-xl font-bold mb-2">Essential Usage (Important!)</h3>
                        <p class="text-slate-600 mb-4">This server separates <strong>GPU Mode</strong> (Default) and <strong>ROOT Mode</strong> (For Installation).</p>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- GPU Mode -->
                            <div class="border border-green-200 bg-green-50 p-4 rounded-xl">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="bg-green-600 text-white text-xs px-2 py-1 rounded font-bold">Default</span>
                                    <h4 class="font-bold text-green-800">GPU Mode</h4>
                                </div>
                                <p class="text-sm text-green-700 mb-3">Used for daily research and running code.</p>
                                <ul class="text-xs text-green-800 space-y-1 list-disc pl-4">
                                    <li>Prompt shows: <span class="font-mono text-green-600">[GPU] user@host...</span></li>
                                    <li><code>python train.py</code> available</li>
                                    <li><code>pip install</code> available</li>
                                </ul>
                            </div>

                            <!-- Root Mode -->
                            <div class="border border-red-200 bg-red-50 p-4 rounded-xl">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="bg-red-600 text-white text-xs px-2 py-1 rounded font-bold">Admin</span>
                                    <h4 class="font-bold text-red-800">ROOT Mode</h4>
                                </div>
                                <p class="text-sm text-red-700 mb-3">Used temporarily to install packages (apt-get).</p>
                                <ul class="text-xs text-red-800 space-y-1 list-disc pl-4">
                                    <li>Prompt shows: <span class="font-mono text-red-600">[ROOT] user@host...</span></li>
                                    <li><code>apt update</code>, <code>apt install</code> available</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-4 bg-slate-800 text-slate-200 p-4 rounded-xl text-sm">
                            <p class="font-bold text-white mb-2">ðŸ”„ Mode Switch Commands (Memorize!)</p>
                            <div class="grid gap-2">
                                <div class="flex justify-between items-center border-b border-slate-700 pb-2">
                                    <span>To install packages (GPU â†’ ROOT)</span>
                                    <code class="text-yellow-400 font-mono bg-slate-700 px-2 py-1 rounded">lab_root_shell</code>
                                </div>
                                <div class="flex justify-between items-center pt-1">
                                    <span>Back to research (ROOT â†’ GPU)</span>
                                    <code class="text-green-400 font-mono bg-slate-700 px-2 py-1 rounded">lab_gpu_shell</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 5: Tools & Tips -->
            <section class="step-card bg-white rounded-2xl p-6 md:p-8 shadow-sm border border-slate-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-orange-500"></div>
                <div class="flex items-start gap-4">
                    <div class="bg-orange-100 text-orange-600 w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0">5</div>
                    <div class="w-full">
                        <h3 class="text-xl font-bold mb-4">Tools & Tips (Survival Kit)</h3>
                        
                        <div class="space-y-6">
                            
                            <!-- 1. Monitoring -->
                            <div>
                                <h4 class="flex items-center gap-2 text-md font-bold text-slate-700 mb-2">
                                    <i data-lucide="activity" class="w-4 h-4"></i> Monitoring Resources
                                </h4>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-slate-100 p-3 rounded-lg">
                                        <p class="text-xs font-bold text-slate-500 mb-1">Check GPU Status</p>
                                        <code class="text-sm bg-black text-green-400 p-1 px-2 rounded block w-full">watch -n 1 nvidia-smi</code>
                                        <p class="text-[11px] text-slate-500 mt-1">Updates every 1s. Check 'Volatile GPU-Util' for usage.</p>
                                    </div>
                                    <div class="bg-slate-100 p-3 rounded-lg">
                                        <p class="text-xs font-bold text-slate-500 mb-1">Check CPU/RAM</p>
                                        <code class="text-sm bg-black text-green-400 p-1 px-2 rounded block w-full">htop</code>
                                        <p class="text-[11px] text-slate-500 mt-1">Visual task manager. Press 'q' to quit.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- 2. Byobu -->
                            <div>
                                <h4 class="flex items-center gap-2 text-md font-bold text-slate-700 mb-2">
                                    <i data-lucide="shield" class="w-4 h-4"></i> Keep Code Running (Byobu)
                                </h4>
                                <div class="bg-orange-50 border border-orange-200 p-4 rounded-xl text-sm text-orange-900">
                                    <p class="mb-2"><strong>Prevents code from stopping</strong> even if you close the terminal window or disconnect internet.</p>
                                    <ol class="list-decimal pl-5 space-y-1 mb-3">
                                        <li>Type <code class="bg-white px-1 rounded border border-orange-200">byobu</code> to enter the session.</li>
                                        <li>Run your code (e.g., training).</li>
                                        <li>To leave it running: Press <span class="font-bold border border-orange-400 px-1 rounded bg-orange-100">F6</span> (Detach).</li>
                                        <li>To return later: Type <code class="bg-white px-1 rounded border border-orange-200">byobu</code> again.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- 3. PyTorch Empty GPU -->
                            <div>
                                <h4 class="flex items-center gap-2 text-md font-bold text-slate-700 mb-2">
                                    <i data-lucide="cpu" class="w-4 h-4"></i> Use Specific GPU in PyTorch
                                </h4>
                                <div class="bg-slate-800 text-slate-200 p-4 rounded-xl text-sm">
                                    <p class="mb-2 text-xs text-slate-400">1. Check <code class="text-slate-300">nvidia-smi</code> to find a free GPU ID (e.g., 0, 1, 2).</p>
                                    <p class="mb-2 text-xs text-slate-400">2. Set the device <strong>at the top</strong> of your Python script.</p>
                                    <div class="code-block bg-black p-3 rounded border border-slate-700 text-green-400 overflow-x-auto">
<span class="text-pink-500">import</span> os
<span class="text-slate-500"># Set to use GPU 1 (Change number as needed)</span>
os.environ[<span class="text-yellow-300">"CUDA_VISIBLE_DEVICES"</span>] = <span class="text-yellow-300">"1"</span>

<span class="text-pink-500">import</span> torch
<span class="text-slate-500"># Now 'cuda' automatically refers to GPU 1</span>
device = torch.device(<span class="text-yellow-300">"cuda"</span>)
</div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

        </div>

        <!-- Toast Notification -->
        <div id="toast" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-xl opacity-0 transition-opacity duration-300 pointer-events-none flex items-center gap-2 z-50">
            <i data-lucide="check-circle" class="w-4 h-4 text-green-400"></i>
            <span class="text-sm font-medium">Copied!</span>
        </div>

    </main>

    <footer class="bg-slate-100 py-8 text-center text-slate-500 text-sm">
        <p>Lab Server Access Guide for Beginners</p>
    </footer>

    <script>
        // Icons
        lucide.createIcons();

        // OS Switcher
        function setOS(os) {
            const winBtn = document.getElementById('btn-windows');
            const macBtn = document.getElementById('btn-mac');
            const winContent = document.getElementById('content-windows');
            const macContent = document.getElementById('content-mac');

            if (os === 'windows') {
                winBtn.className = "px-4 py-2 rounded-md text-sm font-medium bg-white shadow text-indigo-600 transition-all";
                macBtn.className = "px-4 py-2 rounded-md text-sm font-medium text-slate-500 hover:bg-white/50 transition-all";
                winContent.classList.remove('hidden');
                macContent.classList.add('hidden');
            } else {
                winBtn.className = "px-4 py-2 rounded-md text-sm font-medium text-slate-500 hover:bg-white/50 transition-all";
                macBtn.className = "px-4 py-2 rounded-md text-sm font-medium bg-white shadow text-indigo-600 transition-all";
                winContent.classList.add('hidden');
                macContent.classList.remove('hidden');
            }
        }

        // Copy Function
        function copyText(text) {
            // Create a temporary textarea to handle copy
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            showToast();
        }

        // SSH Command Generator
        const usernameInput = document.getElementById('usernameInput');
        const sshCommandDisplay = document.getElementById('sshCommand');

        usernameInput.addEventListener('input', (e) => {
            const username = e.target.value.trim() || '[ID]';
            const displayUsername = username === '[ID]' ? '<span class="text-yellow-400">[ID]</span>' : username;
            sshCommandDisplay.innerHTML = `ssh -p 48000 ${displayUsername}@10.150.20.140`;
        });

        function copyCommand() {
            const username = usernameInput.value.trim();
            if(!username) {
                alert('Please enter your ID first!');
                usernameInput.focus();
                return;
            }
            copyText(`ssh -p 48000 ${username}@10.150.20.140`);
        }

        // Toast Notification
        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 2000);
        }
    </script>
</body>
</html>
